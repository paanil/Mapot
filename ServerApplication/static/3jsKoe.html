
<html>
  <head>
    <title>Three.js kokeilu</title>
    <style>canvas { width: 800px; height: 600px }</style>
  </head>
  <body>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="three.js"></script>
    <script>
      var scene = new THREE.Scene();
      var camera = new THREE.PerspectiveCamera(75, 800 / 600, 0.1, 1000);
      
      var renderer = new THREE.WebGLRenderer();

      renderer.setSize(800,600);
      document.body.appendChild(renderer.domElement);

      var geometry = new THREE.BoxGeometry(25,25,25);
      var cubeMaterial = new THREE.MeshLambertMaterial( { color: 0x007700 } );
      var sphereMaterial = new THREE.MeshLambertMaterial( { color: 0x990000 } );
      var cube = new THREE.Mesh(geometry, cubeMaterial);

      var radius = 50,
          segments = 16,
          rings = 16;
      var sphere = new THREE.Mesh(
        new THREE.SphereGeometry(radius,segments,rings),
        sphereMaterial);
      sphere.position.x = 100;
      var pointLight = new THREE.PointLight(0xFFFFFF);
      pointLight.position.x = -50;
      pointLight.position.y = 60;
      pointLight.position.z = 150;

      scene.add(pointLight);
      
      camera.position.z = 5;
      camera.position.y = 2;


      var render = function () {
       requestAnimationFrame(render);
       fin.rotation.x += 0.03;
       renderer.render(scene, camera);
      };

     function mapDataLoaded(data) {
       console.log(data);
       var loader = new THREE.JSONLoader;
       finGeometry = loader.parse(data.FIN, "");
       fin = new THREE.Mesh(finGeometry.geometry, cubeMaterial);
       scene.add(fin);
       render();
     }

     $.getJSON('/_map_data', {}, mapDataLoaded);





  </script>

  </body>
</html>
